<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <div id="navbar"></div>
    <!-- banner -->
    <section class="bg-warning-customs text-dark">
        <div class="row p-5 d-flex align-items-center">
            <div class="col-12 col-md-6">
                <h1>ENGLISH CLINIC FOR THAI LEARNERS</h1>
                <h4>English Online Self-Learning System</h4>
                <p>ระบบเรียนภาษาอังกฤษออนไลน์ที่ทันสมัยและมีประสิทธิภาพ<br> พร้อมให้คุณเรียนรู้ภาษาอังกฤษได้ทุกที่ทุกเวลา</p>
            </div>
            <div class="col-12 col-md-6">
                <img src="./assets/img/earth.webp" alt="" class="img-fluid">
            </div>
        </div>
    </section>
    <section class="row">
        <div id="carouselExample" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-indicators" id="carouselIndicators"></div>
            <div class="carousel-inner" id="carouselContent">
                <template id="carouselTemplate">
                    <div class="carousel-item">
                        <div class="row p-5 slide-bg">
                            <div class="col-8">
                                <p class="rounded bg-info p-1 w-25 text-center">
                                    บทความ <span class="slide-date text-light"></span>
                                </p>
                                <h1 class="slide-title text-light"></h1>
                                <p class="slide-desc"></p>
                                <a class="slide-link btn btn-light">อ่านเพิ่มเติม</a>
                            </div>

                            <div class="col-4 d-flex slide-images">
                            </div>
                        </div>
                    </div>
                </template>
                <template id="imageTemplate">
                    <div class="card me-1">
                        <img class="img-fluid slide-img">
                    </div>
                </template>
            </div>

            <!-- <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
                <span class="carousel-control-prev-icon"></span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
                <span class="carousel-control-next-icon"></span>
            </button> -->
        </div>
    </section>
    <section class="row">
        <div class="col-6 d-flex flex-column align-self-center">
            <h1>EOL PERSONAL</h1>
            <h1>SYSTEM PROGRAM</h1>
            <p>เรียนภาษาอังกฤษง่าย ๆ ด้วย EOL SYSTEM ระบบอัจฉริยะ ที่พัฒนามาอย่างต่อเนื่อง</p>
        </div>
        <div class="col-6">
            <img src="./assets/img/cards.webp" alt="" class="img-fluid">
        </div>
    </section>
    <div id="footer"></div>
    <script src="./assets/js/script.js"></script>
    <script>
        async function loadCarousel() {
            const res = await fetch("/api/example");
            const slides = await res.json();

            const indicators = document.getElementById("carouselIndicators");
            const content = document.getElementById("carouselContent");

            const tpl = document.getElementById("carouselTemplate");
            const imgTpl = document.getElementById("imageTemplate");

            slides.forEach((slide, index) => {
                // 1) indicators
                const btn = document.createElement("button");
                btn.setAttribute("type", "button");
                btn.setAttribute("data-bs-target", "#carouselExample");
                btn.setAttribute("data-bs-slide-to", index);
                if (index === 0) btn.classList.add("active");
                indicators.appendChild(btn);

                // 2) clone template
                const clone = tpl.content.cloneNode(true);

                const item = clone.querySelector(".carousel-item");
                if (index === 0) item.classList.add("active");

                // 3) ใส่ข้อมูลลง template
                clone.querySelector(".slide-title").textContent = slide.title;
                clone.querySelector(".slide-desc").textContent = slide.description;
                clone.querySelector(".slide-date").textContent = slide.date;
                clone.querySelector(".slide-link").href = slide.link;

                // set background image
                clone.querySelector(".slide-bg").style.background = `url('${slide.background}')`;
                clone.querySelector(".slide-bg").style.backgroundSize = "cover";

                // 4) ใส่รูปหลายใบ
                const imgContainer = clone.querySelector(".slide-images");

                slide.images.forEach(src => {
                    const imgClone = imgTpl.content.cloneNode(true);
                    imgClone.querySelector(".slide-img").src = src;
                    imgContainer.appendChild(imgClone);
                });

                // 5) append final item
                content.appendChild(clone);
            });
        }

        loadCarousel();
    </script>
</body>

</html>